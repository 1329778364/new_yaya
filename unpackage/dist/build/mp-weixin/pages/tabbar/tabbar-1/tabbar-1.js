(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabbar/tabbar-1/tabbar-1","components/uni-icons/uni-icons"],{"04d3":function(t,e,n){"use strict";n.r(e);var a=n("44e4"),o=n("ce2c");for(var i in o)"default"!==i&&function(t){n.d(e,t,function(){return o[t]})}(i);n("3700");var s,l=n("f0c5"),c=Object(l["a"])(o["default"],a["b"],a["c"],!1,null,"10054982",null,!1,a["a"],s);e["default"]=c.exports},"13a8":function(t,e,n){"use strict";n.r(e);var a=n("5cc7"),o=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);e["default"]=o.a},"1a99":function(t,e,n){"use strict";(function(t){n("b7c0"),n("921b");a(n("66fd"));var e=a(n("423f"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"2e6f":function(t,e,n){},3700:function(t,e,n){"use strict";var a=n("aa23"),o=n.n(a);o.a},"415a":function(t,e,n){"use strict";var a=n("f88f"),o=n.n(a);o.a},"423f":function(t,e,n){"use strict";n.r(e);var a=n("6afb"),o=n("13a8");for(var i in o)"default"!==i&&function(t){n.d(e,t,function(){return o[t]})}(i);n("415a");var s,l=n("f0c5"),c=Object(l["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],s);e["default"]=c.exports},"44e4":function(t,e,n){"use strict";var a,o=function(){var t=this,e=t.$createElement;t._self._c},i=[];n.d(e,"b",function(){return o}),n.d(e,"c",function(){return i}),n.d(e,"a",function(){return a})},"461d":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(n("f2e4"));function o(t){return t&&t.__esModule?t:{default:t}}var i={name:"UniIcons",props:{type:{type:String,default:""},color:{type:String,default:"#333333"},size:{type:[Number,String],default:16}},data:function(){return{icons:a.default}},methods:{_onClick:function(){this.$emit("click")}}};e.default=i},"5cc7":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;o(n("04d3"));var a=o(n("6a7a"));function o(t){return t&&t.__esModule?t:{default:t}}var i=function(){return n.e("components/uni-nav-bar/uni-nav-bar").then(n.bind(null,"fd2a"))},s=function(){return n.e("components/uni-status-bar/uni-status-bar").then(n.bind(null,"c071"))},l=function(){return n.e("components/refresh").then(n.bind(null,"8213"))},c=function(){return n.e("components/navTab").then(n.bind(null,"2be0"))},u=function(){return Promise.all([n.e("common/vendor"),n.e("components/schoolPicker/schoolPicker")]).then(n.bind(null,"3a5c"))},r=wx.cloud.database().collection("users"),d=wx.cloud.database().collection("userInfo"),f={components:{uniNavBar:i,uniStatusBar:s,refresh:l,navTab:c,schoolPicker:u},data:function(){return{city:"北京",hasUserInfo:!1,canIUse:wx.canIUse("button.open-type.getUserInfo"),userInfo:{},modalName:"close",isDo:"",nickName:"",age:"",sex:"男",career:"",schoolData:"",provinceSchool:"",longitude:"",latitude:"",location:"",sexSwitch:!0,index:-1,picker:["学生或高校从业者","社会精英","天涯人"],multiIndex:[0,0,0],multiArray:[["无脊柱动物","脊柱动物"],["扁性动物","线形动物","环节动物","软体动物","节肢动物"],["猪肉绦虫","吸血虫"]],controls:[{id:1,iconPath:"/static/img/map/map_position.png",position:{left:a.default.globalData.windowWidth/2-30,top:(a.default.globalData.windowHeight-40)/2-30,width:60,height:60},clickable:!1},{id:2,iconPath:"/static/img/map/map_recover.png",position:{left:300,top:a.default.globalData.windowHeight-60,width:40,height:40},clickable:!0}],markers:[{iconPath:"",id:0,latitude:"",longitude:"",width:20,height:25}],currentPage:"index",tabTitle:["附近","列表"],currentTab:0}},onLoad:function(t){var e=this;a.default.globalData.userInfo?this.setData({userInfo:a.default.globalData.userInfo,hasUserInfo:!0}):this.canIUse?a.default.userInfoReadyCallback=function(t){e.setData({userInfo:t.userInfo,hasUserInfo:!0})}:wx.getUserInfo({success:function(t){a.default.globalData.userInfo=t.userInfo,e.setData({userInfo:t.userInfo,hasUserInfo:!0})}})},onHide:function(){},onReady:function(){this.mapCtx=wx.createMapContext("mymap")},onShow:function(){a.default.globalData.isNewUser&&(this.modalName="open",console.log("没有注册 打开弹框 获取信息")),console.log("打开首页页面获取定位信息"),this.getLocation(),this.getMessage()},methods:{onShareAppMessage:function(){return{title:"每个人都是可以让信息产生收益",path:"/pages/index/index"}},clickList:function(t){console.log("点击list,中的一个卡片跳转个人页面",t,t.myId),wx.navigateTo({url:"/pages/detail/detail?id="+t.currentTarget.id})},search:function(t){console.log("输入结束，开始从数据库检索需要的关键词 并存储在marker中",t.target.value),this.getSelectInfo(t.target.value)},getSelectInfo:function(t){r.where({message:t}).get({success:this.handlegetMessageSucc.bind(this)})},controlTap:function(){this.mapCtx.moveToLocation()},handleMarkerTap:function(t){console.log("点击图标跳转详情页面",t,t.markerId),wx.navigateTo({url:"/pages/detail/detail?id="+t.markerId})},getMessage:function(){r.get({success:this.handlegetMessageSucc.bind(this)})},handlegetMessageSucc:function(t){console.log("查询数据成功。。。",t.data);var e=t.data,n=e.map(function(t,e){return{iconPath:"/static/img/map/"+t.type+".png",id:t._id,latitude:t.latitude,longitude:t.longitude,width:50,height:50,message:t.message,contact:t.contact,type:t.type}});this.markers=n,console.log("获取到全部数据",this.markers)},getLocation:function(){t.getLocation({type:"gcj02",success:this.handleGetLocaltionSucc.bind(this)})},handleGetLocaltionSucc:function(t){console.log("获得定位数据",t),this.longitude=t.longitude,this.latitude=t.latitude,this.location=[t.longitude,t.latitude]},changeTab:function(e){this.currentTab=e,console.log(e),1==this.currentTab&&t.navigateTo({url:"/pages/taskList/taskList"})},hideModal:function(t){if(console.log("点击确认之后",t),"conformFormList"==t.currentTarget.id){if(""==this.nickName)return void this.showwarning("请填写昵称");if(""==this.age)return void this.showwarning("请填写年龄");if(""==this.sex)return void this.showwarning("请选择性别");if(""==this.career)return void this.showwarning("请填写职业");if("学生或高校从业者"==this.career&&""==this.schoolData)return void this.showwarning("请选择学校");this.isDo=!0,this.modalName="close";var e=Object.assign({},{age:this.age,nickName:this.nickName,sex:this.sex,career:this.career,schoolData:this.schoolData,provinceSchool:this.provinceSchool,isDo:this.isDo,location:this.location});d.add({data:e,success:function(t){console.log("新用户注册 提交数据成功",t),a.default.globalData.isNewUser=!1}}),console.log(this.age,this.nickName,this.sex,this.schoolData,this.career)}},showwarning:function(t){wx.showToast({title:t,icon:"loading",duration:2e3})},sexSwitchChange:function(t){this.sexSwitch=t.detail.value,console.log("是男是女",t),this.sexSwitch?this.sex="男":this.sex="女"},MultiChange:function(t){this.multiIndex=t.detail.value},PickerChange:function(t){this.index=t.detail.value,this.career=this.picker[this.index]},MultiColumnChange:function(t){var e={multiArray:this.multiArray,multiIndex:this.multiIndex};switch(e.multiIndex[t.detail.column]=t.detail.value,t.detail.column){case 0:switch(e.multiIndex[0]){case 0:e.multiArray[1]=["扁性动物","线形动物","环节动物","软体动物","节肢动物"],e.multiArray[2]=["猪肉绦虫","吸血虫"];break;case 1:e.multiArray[1]=["鱼","两栖动物","爬行动物"],e.multiArray[2]=["鲫鱼","带鱼"];break}e.multiIndex[1]=0,e.multiIndex[2]=0;break;case 1:switch(e.multiIndex[0]){case 0:switch(e.multiIndex[1]){case 0:e.multiArray[2]=["猪肉绦虫","吸血虫"];break;case 1:e.multiArray[2]=["蛔虫"];break;case 2:e.multiArray[2]=["蚂蚁","蚂蟥"];break;case 3:e.multiArray[2]=["河蚌","蜗牛","蛞蝓"];break;case 4:e.multiArray[2]=["昆虫","甲壳动物","蛛形动物","多足动物"];break}break;case 1:switch(e.multiIndex[1]){case 0:e.multiArray[2]=["鲫鱼","带鱼"];break;case 1:e.multiArray[2]=["青蛙","娃娃鱼"];break;case 2:e.multiArray[2]=["蜥蜴","龟","壁虎"];break}break}e.multiIndex[2]=0;break}this.multiArray=e.multiArray,this.multiIndex=e.multiIndex},showSchoolPicker:function(){this.$refs.schoolPicker.show()},onConfirm:function(t){console.log("选择的结果label",t.label);var e=t.label.split("-")[2];console.log("源数据:".concat(JSON.stringify(t))),"暂未收录"!==e&&(this.provinceSchool=t.label,this.schoolData=e,console.log("学校:".concat(e)))},nikeNameInput:function(t){console.log("输入",t,t.detail,t.detail.value),this.nickName=t.detail.value},ageInput:function(t){console.log("输入年龄",t,t.detail,t.detail.value),this.age=t.detail.value}}};e.default=f}).call(this,n("543d")["default"])},"5d35":function(t,e,n){"use strict";var a=n("2e6f"),o=n.n(a);o.a},"6a7a":function(t,e,n){"use strict";n.r(e);var a=n("8450");for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);n("5d35");var i,s,l,c,u=n("f0c5"),r=Object(u["a"])(a["default"],i,s,!1,null,null,null,!1,l,c);e["default"]=r.exports},"6afb":function(t,e,n){"use strict";var a={"uni-nav-bar":()=>n.e("components/uni-nav-bar/uni-nav-bar").then(n.bind(null,"fd2a")),schoolPicker:()=>Promise.all([n.e("common/vendor"),n.e("components/schoolPicker/schoolPicker")]).then(n.bind(null,"3a5c"))},o=function(){var t=this,e=t.$createElement;t._self._c},i=[];n.d(e,"b",function(){return o}),n.d(e,"c",function(){return i}),n.d(e,"a",function(){return a})},8450:function(t,e,n){"use strict";n.r(e);var a=n("f4b1"),o=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);e["default"]=o.a},aa23:function(t,e,n){},ce2c:function(t,e,n){"use strict";n.r(e);var a=n("461d"),o=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);e["default"]=o.a},f4b1:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(n("66fd"));function o(t){return t&&t.__esModule?t:{default:t}}var i={globalData:{windowHeight:0,windowWidth:0,isNewUser:!1,userInfo:"",hasUserInfo:!1,sessionCode:"",openid:"",appid:"",unionid:"",stuRegister:!1},onLaunch:function(){var e=this,n=wx.getStorageSync("logs")||[];n.unshift(Date.now()),wx.setStorageSync("logs",n),wx.login({success:function(t){console.log("登录时获取的信息 主要是sessionCode",t,e),e.globalData.sessionCode=t.code}}),wx.cloud.init({env:"wlq-1011"});wx.cloud.database().collection("userInfo");var o=wx.cloud.database().collection("studentRegister");wx.cloud.callFunction({name:"getopenid",success:function(t){console.log("获取用户openid信息成功。。",t),getApp().globalData.openid=t.result.openid,getApp().globalData.appid=t.result.appid}}),wx.getSetting({success:function(t){t.authSetting["scope.userInfo"]&&wx.getUserInfo({success:function(t){e.globalData.userInfo=t.userInfo,e.globalData.hasUserInfo=!0,console.log("APP.vue中的获取用户信息",e.globalData.userInfo),e.userInfoReadyCallback&&e.userInfoReadyCallback(t)}})}}),setTimeout(function(){o.where({_openid:getApp().globalData.openid}).get({success:function(t){console.log(t.data.length),0==t.data.length?(getApp().globalData.stuRegister=!1,console.log("是一个新学生用户需要进行注册，目前状态",getApp().globalData.stuRegister)):(console.log("数据库中有该学生的用户信息",t),getApp().globalData.stuRegister=!0)}})},3e3);try{var i=t.getSystemInfoSync();this.globalData.windowHeight=i.windowHeight,this.globalData.windowWidth=i.windowWidth,console.log(i),console.log("onlaunch时得到的手机尺寸数据",this.globalData.windowHeight,this.globalData.windowWidth)}catch(s){console.log("无法获取手机信息")}t.getSystemInfo({success:function(t){a.default.prototype.StatusBar=t.statusBarHeight;var e=wx.getMenuButtonBoundingClientRect();a.default.prototype.Custom=e,a.default.prototype.CustomBar=e.bottom+e.top-t.statusBarHeight}})},onShow:function(){console.log("App Show")},onHide:function(){console.log("App Hide")}};e.default=i}).call(this,n("543d")["default"])},f88f:function(t,e,n){}},[["1a99","common/runtime","common/vendor"]]]);
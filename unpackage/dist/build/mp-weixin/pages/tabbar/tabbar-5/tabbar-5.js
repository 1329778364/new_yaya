(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabbar/tabbar-5/tabbar-5"],{"2e6f":function(o,e,t){},"41ae":function(o,e,t){},"5d35":function(o,e,t){"use strict";var n=t("2e6f"),a=t.n(n);a.a},"6a7a":function(o,e,t){"use strict";t.r(e);var n=t("8450");for(var a in n)"default"!==a&&function(o){t.d(e,o,function(){return n[o]})}(a);t("5d35");var l,i,c,s,u=t("f0c5"),r=Object(u["a"])(n["default"],l,i,!1,null,null,null,!1,c,s);e["default"]=r.exports},"7b5e":function(o,e,t){"use strict";(function(o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(t("6a7a"));function a(o){return o&&o.__esModule?o:{default:o}}var l=wx.cloud.database().collection("userInfo"),i={data:function(){return{avatarUrl:"../../../static/logo.png",nickName:"未登录",gender:"",hasUserInfo:!1,canIUse:wx.canIUse("button.open-type.getUserInfo"),userInfo:{},height:64,top:5,scrollH:0,opcity:0,iconOpcity:.5,personInfo:[{nickName:"",age:"",sex:"",career:"",schoolData:"",provinceSchool:"",longitude:"",latitude:"",location:""}],title:"Hello",ColorList:this.ColorList,avatar:["https://ossweb-img.qq.com/images/lol/web201310/skin/big10001.jpg"],cuIconList:[{cuIcon:"cardboardfill",color:"red",badge:120,name:"VR"},{cuIcon:"recordfill",color:"orange",badge:1,name:"录像"},{cuIcon:"picfill",color:"yellow",badge:0,name:"图像"},{cuIcon:"noticefill",color:"olive",badge:22,name:"通知"},{cuIcon:"upstagefill",color:"cyan",badge:0,name:"排行榜"},{cuIcon:"clothesfill",color:"blue",badge:0,name:"皮肤"},{cuIcon:"discoverfill",color:"purple",badge:0,name:"发现"},{cuIcon:"questionfill",color:"mauve",badge:0,name:"帮助"},{cuIcon:"commandfill",color:"purple",badge:0,name:"问答"},{cuIcon:"brandfill",color:"mauve",badge:0,name:"版权"}],modalName:null,gridCol:4,gridBorder:!0,menuBorder:!0,menuArrow:!0,menuCard:!0,skin:!0,listTouchStart:0,listTouchDirection:null}},onPageScroll:function(o){var e=o.scrollTop<=0?0:o.scrollTop,t=e/this.scrollH;this.opcity>=1&&t>=1||(this.opcity=t,this.iconOpcity=.5*(1-t<0?0:1-t))},onLoad:function(e){var t=this,n={};n=wx.getMenuButtonBoundingClientRect(),o.getSystemInfo({success:function(o){t.width=n.left||o.windowWidth,t.height=n.top?n.top+n.height+8:o.statusBarHeight+44,t.top=n.top?n.top+(n.height-32)/2:o.statusBarHeight+6,t.scrollH=o.windowWidth}})},onShow:function(){this.setData({hasUserInfo:n.default.globalData.hasUserInfo}),n.default.globalData.hasUserInfo&&this.setData({nickName:n.default.globalData.userInfo.nickName,gender:n.default.globalData.userInfo.gender,userInfo:n.default.globalData.userInfo,avatarUrl:n.default.globalData.userInfo.avatarUrl,hasUserInfo:!0})},methods:{tryLoginWithWechat:function(){"未登录"==this.nickName&&(console.log("没有登录"),o.navigateTo({url:"../../login/login"}))},setData:function(o){var e,t,n=this,a=[];Object.keys(o).forEach(function(l){a=l.split("."),e=o[l],t=n.$data,a.forEach(function(o,l){l+1==a.length?n.$set(t,o,e):t[o]||n.$set(t,o,{}),t=t[o]})})},getUserInfo:function(o){console.log(o),n.default.globalData.userInfo=o.detail.userInfo,this.setData({userInfo:o.detail.userInfo,hasUserInfo:!0})},toMySelfPage:function(){o.navigateTo({url:"../../MySelfPage/MySelfPage"})},getAppUserInfo:function(){console.log("用户openid ",n.default.globalData.openid),l.where({_openid:n.default.globalData.openid}).get({success:this.handleGetAppUserInfoSucc.bind(this)})},handleGetAppUserInfoSucc:function(o){console.log("获取app产生的数据 ",o,o.data[0]);var e=o.data,t=e.map(function(o,e){return{nickName:o.nickName,age:o.age,sex:o.sex,career:o.career,schoolData:o.schoolData,provinceSchool:o.provinceSchool,longitude:o.longitude,latitude:o.latitude,location:o.location}});this.personInfo=t,console.log("tap5 用户信息",this.personInfo)},fail:function(o){console.log("tap5 用户信息失败。。。",o)}}};e.default=i}).call(this,t("543d")["default"])},"7de3":function(o,e,t){"use strict";t.r(e);var n=t("7b5e"),a=t.n(n);for(var l in n)"default"!==l&&function(o){t.d(e,o,function(){return n[o]})}(l);e["default"]=a.a},8450:function(o,e,t){"use strict";t.r(e);var n=t("f4b1"),a=t.n(n);for(var l in n)"default"!==l&&function(o){t.d(e,o,function(){return n[o]})}(l);e["default"]=a.a},b05c:function(o,e,t){"use strict";var n=t("41ae"),a=t.n(n);a.a},bb55:function(o,e,t){"use strict";(function(o){t("b7c0"),t("921b");n(t("66fd"));var e=n(t("fcbd"));function n(o){return o&&o.__esModule?o:{default:o}}o(e.default)}).call(this,t("543d")["createPage"])},ee98:function(o,e,t){"use strict";var n={"uni-icons":()=>Promise.all([t.e("common/vendor"),t.e("components/uni-icons/uni-icons")]).then(t.bind(null,"04d3"))},a=function(){var o=this,e=o.$createElement;o._self._c},l=[];t.d(e,"b",function(){return a}),t.d(e,"c",function(){return l}),t.d(e,"a",function(){return n})},f4b1:function(o,e,t){"use strict";(function(o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(t("66fd"));function a(o){return o&&o.__esModule?o:{default:o}}var l={globalData:{windowHeight:0,windowWidth:0,isNewUser:!1,userInfo:"",hasUserInfo:!1,sessionCode:"",openid:"",appid:"",unionid:"",stuRegister:!1},onLaunch:function(){var e=this,t=wx.getStorageSync("logs")||[];t.unshift(Date.now()),wx.setStorageSync("logs",t),wx.login({success:function(o){console.log("登录时获取的信息 主要是sessionCode",o,e),e.globalData.sessionCode=o.code}}),wx.cloud.init({env:"wlq-1011"});wx.cloud.database().collection("userInfo");var a=wx.cloud.database().collection("studentRegister");wx.cloud.callFunction({name:"getopenid",success:function(o){console.log("获取用户openid信息成功。。",o),getApp().globalData.openid=o.result.openid,getApp().globalData.appid=o.result.appid}}),wx.getSetting({success:function(o){o.authSetting["scope.userInfo"]&&wx.getUserInfo({success:function(o){e.globalData.userInfo=o.userInfo,e.globalData.hasUserInfo=!0,console.log("APP.vue中的获取用户信息",e.globalData.userInfo),e.userInfoReadyCallback&&e.userInfoReadyCallback(o)}})}}),setTimeout(function(){a.where({_openid:getApp().globalData.openid}).get({success:function(o){console.log(o.data.length),0==o.data.length?(getApp().globalData.stuRegister=!1,console.log("是一个新学生用户需要进行注册，目前状态",getApp().globalData.stuRegister)):(console.log("数据库中有该学生的用户信息",o),getApp().globalData.stuRegister=!0)}})},3e3);try{var l=o.getSystemInfoSync();this.globalData.windowHeight=l.windowHeight,this.globalData.windowWidth=l.windowWidth,console.log(l),console.log("onlaunch时得到的手机尺寸数据",this.globalData.windowHeight,this.globalData.windowWidth)}catch(i){console.log("无法获取手机信息")}o.getSystemInfo({success:function(o){n.default.prototype.StatusBar=o.statusBarHeight;var e=wx.getMenuButtonBoundingClientRect();n.default.prototype.Custom=e,n.default.prototype.CustomBar=e.bottom+e.top-o.statusBarHeight}})},onShow:function(){console.log("App Show")},onHide:function(){console.log("App Hide")}};e.default=l}).call(this,t("543d")["default"])},fcbd:function(o,e,t){"use strict";t.r(e);var n=t("ee98"),a=t("7de3");for(var l in a)"default"!==l&&function(o){t.d(e,o,function(){return a[o]})}(l);t("b05c");var i,c=t("f0c5"),s=Object(c["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],i);e["default"]=s.exports}},[["bb55","common/runtime","common/vendor"]]]);